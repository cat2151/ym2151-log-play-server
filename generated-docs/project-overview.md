Last updated: 2025-11-24

# Project Overview

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- YM2151 (OPM) éŸ³æºãƒãƒƒãƒ—ã®ãƒ¬ã‚¸ã‚¹ã‚¿ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å†ç”Ÿã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
- å¸¸é§å‹ã‚µãƒ¼ãƒãƒ¼ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆã¾ãŸã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰ã§æ§‹æˆã•ã‚Œã€Windowsç’°å¢ƒã§ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³æ¥½åˆ¶å¾¡ã‚’æä¾›ã—ã¾ã™ã€‚
- ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯ãªéŸ³æ¥½æ¼”å¥ã®åˆ‡ã‚Šæ›¿ãˆã‚„ã€éŸ³è‰²ã‚¨ãƒ‡ã‚£ã‚¿ãªã©ã‹ã‚‰ã®å‹•çš„ãªéŸ³éŸ¿æ“ä½œã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè‡ªä½“ã¯GUIãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’æŒã¡ã¾ã›ã‚“ãŒã€Rustãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«APIã‚’æä¾›ã—ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯ãªåˆ¶å¾¡ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚
- éŸ³æ¥½ãƒ»ã‚ªãƒ¼ãƒ‡ã‚£ã‚ª: YM2151 (OPM) éŸ³æºãƒãƒƒãƒ—ã®ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆNuked-OPMãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ï¼‰ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå†ç”Ÿã€WAVãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›æ©Ÿèƒ½ã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã€‚
- é–‹ç™ºãƒ„ãƒ¼ãƒ«: Rust (ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª)ã€Cargo (Rustãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ»ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ )ã€zig cc (Cã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã€Nuked-OPMã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã«åˆ©ç”¨)ã€‚
- ãƒ†ã‚¹ãƒˆ: Rustã®æ¨™æº–ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‹å˜ä½“ãƒ»çµ±åˆãƒ†ã‚¹ãƒˆ (`cargo test`)ã€‚
- ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«: Cargo (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ãƒ«ãƒ‰ã¨ä¾å­˜é–¢ä¿‚ç®¡ç†)ã€‚
- è¨€èªæ©Ÿèƒ½: Rustã®å¼·åŠ›ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã€ä¸¦è¡Œå‡¦ç†ã€FFIï¼ˆForeign Function Interfaceï¼‰æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦Cè¨€èªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨é€£æºã—ã¦ã„ã¾ã™ã€‚
- è‡ªå‹•åŒ–ãƒ»CI/CD: CIç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`setup_ci_environment.sh`) ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ãŒã€å…·ä½“çš„ãªCI/CDã‚µãƒ¼ãƒ“ã‚¹ã¸ã®çµ±åˆã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã‹ã‚‰ã¯èª­ã¿å–ã‚Œã¾ã›ã‚“ã€‚
- é–‹ç™ºæ¨™æº–: EditorConfig (`.editorconfig`) ã‚’ä½¿ç”¨ã—ã¦ã€ç•°ãªã‚‹ã‚¨ãƒ‡ã‚£ã‚¿é–“ã§ã®ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã®ä¸€è²«æ€§ã‚’ç¶­æŒã—ã¦ã„ã¾ã™ã€‚

## ãƒ•ã‚¡ã‚¤ãƒ«éšå±¤ãƒ„ãƒªãƒ¼
```
ğŸ“ .cargo/
  ğŸ“„ config.toml
ğŸ“„ .editorconfig
ğŸ“„ .gitignore
ğŸ“„ Cargo.lock
ğŸ“„ Cargo.toml
ğŸ“„ LICENSE
ğŸ“– README.ja.md
ğŸ“– README.md
ğŸ“„ _config.yml
ğŸ“„ build.rs
ğŸ“ generated-docs/
  ğŸ“– development-status-generated-prompt.md
ğŸ“„ install-ym2151-tools.rs
ğŸ“„ opm.c
ğŸ“„ opm.h
ğŸ“Š output_ym2151.json
ğŸ“„ setup_ci_environment.sh
ğŸ“ src/
  ğŸ“ audio/
    ğŸ“„ buffers.rs
    ğŸ“„ commands.rs
    ğŸ“„ generator.rs
    ğŸ“„ mod.rs
    ğŸ“„ player.rs
    ğŸ“„ scheduler.rs
    ğŸ“„ stream.rs
  ğŸ“„ audio_config.rs
  ğŸ“ client/
    ğŸ“„ config.rs
    ğŸ“„ core.rs
    ğŸ“„ interactive.rs
    ğŸ“„ json.rs
    ğŸ“„ mod.rs
    ğŸ“„ server.rs
  ğŸ“„ debug_wav.rs
  ğŸ“„ demo_client_interactive.rs
  ğŸ“„ demo_server_interactive.rs
  ğŸ“„ demo_server_non_interactive.rs
  ğŸ“„ events.rs
  ğŸ“ ipc/
    ğŸ“„ mod.rs
    ğŸ“„ pipe_windows.rs
    ğŸ“„ protocol.rs
    ğŸ“ windows/
      ğŸ“„ mod.rs
      ğŸ“„ pipe_factory.rs
      ğŸ“„ pipe_handle.rs
      ğŸ“„ pipe_reader.rs
      ğŸ“„ pipe_writer.rs
      ğŸ“„ test_logging.rs
  ğŸ“„ lib.rs
  ğŸ“„ logging.rs
  ğŸ“„ main.rs
  ğŸ“„ mmcss.rs
  ğŸ“„ opm.rs
  ğŸ“„ opm_ffi.rs
  ğŸ“„ player.rs
  ğŸ“„ resampler.rs
  ğŸ“„ scheduler.rs
  ğŸ“ server/
    ğŸ“„ command_handler.rs
    ğŸ“„ connection.rs
    ğŸ“„ mod.rs
    ğŸ“„ playback.rs
    ğŸ“„ state.rs
  ğŸ“ tests/
    ğŸ“„ audio_tests.rs
    ğŸ“„ client_tests.rs
    ğŸ“„ debug_wav_tests.rs
    ğŸ“„ demo_server_interactive_tests.rs
    ğŸ“„ demo_server_non_interactive_tests.rs
    ğŸ“„ events_tests.rs
    ğŸ“„ ipc_pipe_windows_tests.rs
    ğŸ“„ ipc_protocol_tests.rs
    ğŸ“„ logging_tests.rs
    ğŸ“„ mmcss_tests.rs
    ğŸ“„ mod.rs
    ğŸ“„ opm_ffi_tests.rs
    ğŸ“„ opm_tests.rs
    ğŸ“„ play_json_interactive_tests.rs
    ğŸ“„ player_tests.rs
    ğŸ“„ resampler_tests.rs
    ğŸ“„ scheduler_tests.rs
    ğŸ“„ server_tests.rs
    ğŸ“„ wav_writer_tests.rs
  ğŸ“„ wav_writer.rs
ğŸ“ tests/
  ğŸ“ audio/
    ğŸ“„ audio_playback_test.rs
    ğŸ“„ audio_sound_test.rs
    ğŸ“„ mod.rs
  ğŸ“„ clear_schedule_test.rs
  ğŸ“„ cli_integration_test.rs
  ğŸ“„ client_json_test.rs
  ğŸ“„ client_test.rs
  ğŸ“„ client_verbose_test.rs
  ğŸ“„ debug_wav_test.rs
  ğŸ“„ duration_test.rs
  ğŸ“„ ensure_server_ready_test.rs
  ğŸ“„ events_processing_test.rs
  ğŸ“„ feature_demonstration_test.rs
  ğŸ“ fixtures/
    ğŸ“Š complex.json
    ğŸ“Š simple.json
  ğŸ“„ integration_test.rs
  ğŸ“ interactive/
    ğŸ“„ mod.rs
    ğŸ“„ mode_test.rs
    ğŸ“„ play_json_test.rs
    ğŸ“„ shared_mutex.rs
    ğŸ“„ step_by_step_test.rs
  ğŸ“„ interactive_tests.rs
  ğŸ“„ ipc_pipe_test.rs
  ğŸ“„ logging_test.rs
  ğŸ“„ server_basic_test.rs
  ğŸ“„ server_integration_test.rs
  ğŸ“„ tail_generation_test.rs
  ğŸ“„ test_util_server_mutex.rs
```

## ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°èª¬æ˜

-   `.cargo/config.toml`: Cargoã®ãƒ“ãƒ«ãƒ‰è¨­å®šã‚„ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãªã©ã‚’å®šç¾©ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
-   `.editorconfig`: ã‚³ãƒ¼ãƒ‰ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚„æ–‡å­—ã‚³ãƒ¼ãƒ‰ãªã©ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’çµ±ä¸€ã™ã‚‹ãŸã‚ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
-   `.gitignore`: Gitã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¾ã™ã€‚
-   `Cargo.lock`: `Cargo.toml`ã«åŸºã¥ã„ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå®Ÿéš›ã«ä½¿ç”¨ã™ã‚‹ä¾å­˜ã‚¯ãƒ¬ãƒ¼ãƒˆã®æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒã‚§ãƒƒã‚¯ã‚µãƒ ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚
-   `Cargo.toml`: Rustãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ä¾å­˜é–¢ä¿‚ã€ãƒ“ãƒ«ãƒ‰è¨­å®šãªã©ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚
-   `LICENSE`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ï¼ˆMIT Licenseï¼‰ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚
-   `README.ja.md`, `README.md`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¦‚è¦ã€æ©Ÿèƒ½ã€ä½¿ã„æ–¹ã€ãƒ“ãƒ«ãƒ‰æ–¹æ³•ãªã©ã‚’èª¬æ˜ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆæ—¥æœ¬èªç‰ˆã¨è‹±èªç‰ˆï¼‰ã€‚
-   `_config.yml`: GitHub Pagesãªã©ã®é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã§åˆ©ç”¨ã•ã‚Œã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
-   `build.rs`: Rustãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã€ä¸»ã«Cè¨€èªã®`opm.c`ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
-   `generated-docs/development-status-generated-prompt.md`: è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸé–‹ç™ºçŠ¶æ³ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã™ã€‚
-   `install-ym2151-tools.rs`: é–¢é€£ã™ã‚‹ym2151ãƒ„ãƒ¼ãƒ«ç¾¤ã‚’ä¸€æ‹¬ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã®Rustã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚
-   `opm.c`, `opm.h`: YM2151 (OPM) éŸ³æºãƒãƒƒãƒ—ã®ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†Cè¨€èªã®ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ˜ãƒƒãƒ€ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚Nuked-OPMãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸€éƒ¨ã€‚
-   `output_ym2151.json`: YM2151ãƒ¬ã‚¸ã‚¹ã‚¿ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã®ã‚µãƒ³ãƒ—ãƒ«JSONãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ã¸é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚
-   `setup_ci_environment.sh`: ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆCIï¼‰ç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ãŸã‚ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚
-   `src/lib.rs`: ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒæä¾›ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã§ã€å…¬é–‹ã•ã‚Œã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„æ§‹é€ ä½“ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚
-   `src/main.rs`: å®Ÿè¡Œå¯èƒ½ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã§ã€ã‚µãƒ¼ãƒãƒ¼ã¾ãŸã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’èµ·å‹•ã—ã¾ã™ã€‚
-   `src/audio/buffers.rs`: ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒãƒ•ã‚¡ç®¡ç†ã«é–¢é€£ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®šç¾©ã—ã¾ã™ã€‚
-   `src/audio/commands.rs`: ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå†ç”Ÿã«é–¢ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ï¼ˆå†ç”Ÿã€åœæ­¢ãªã©ï¼‰ã®å®šç¾©ã‚’æ‰±ã„ã¾ã™ã€‚
-   `src/audio/generator.rs`: YM2151éŸ³æºã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªä¿¡å·ç”Ÿæˆã‚’æ‹…å½“ã—ã¾ã™ã€‚
-   `src/audio/mod.rs`: `audio`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã€é–¢é€£ã™ã‚‹ã‚µãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å…¬é–‹ã—ã¾ã™ã€‚
-   `src/audio/player.rs`: å®Ÿéš›ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå†ç”Ÿãƒ­ã‚¸ãƒƒã‚¯ï¼ˆã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒã‚¤ã‚¹ã¸ã®å‡ºåŠ›ãªã©ï¼‰ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
-   `src/audio/scheduler.rs`: YM2151ãƒ¬ã‚¸ã‚¹ã‚¿ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ™‚é–“ãƒ™ãƒ¼ã‚¹ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç®¡ç†ã—ã¾ã™ã€‚
-   `src/audio/stream.rs`: ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ç®¡ç†ã¨æ“ä½œã«é–¢ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/audio_config.rs`: ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå†ç”Ÿã«é–¢ã™ã‚‹è¨­å®šï¼ˆã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆã€ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºãªã©ï¼‰ã‚’å®šç¾©ã—ã¾ã™ã€‚
-   `src/client/config.rs`: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šï¼ˆã‚µãƒ¼ãƒãƒ¼åãªã©ï¼‰ã‚’æ‰±ã„ã¾ã™ã€‚
-   `src/client/core.rs`: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼é–“ã®åŸºæœ¬çš„ãªé€šä¿¡å‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
-   `src/client/interactive.rs`: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®é«˜åº¦ãªåˆ¶å¾¡ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®šç¾©ã—ã¾ã™ã€‚
-   `src/client/json.rs`: JSONå½¢å¼ã®éŸ³æ¥½ãƒ‡ãƒ¼ã‚¿ã‚’è§£æã—ã€å†…éƒ¨ã®ã‚¤ãƒ™ãƒ³ãƒˆæ§‹é€ ã«å¤‰æ›ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/client/mod.rs`: `client`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆAPIã‚’å…¬é–‹ã—ã¾ã™ã€‚
-   `src/client/server.rs`: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ï¼ˆèµ·å‹•ã€ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ï¼‰ã‚’ç®¡ç†ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
-   `src/debug_wav.rs`: ãƒ‡ãƒãƒƒã‚°ç›®çš„ã§ç”Ÿæˆã•ã‚ŒãŸã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚’WAVãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/demo_client_interactive.rs`: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚
-   `src/demo_server_interactive.rs`: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚
-   `src/demo_server_non_interactive.rs`: éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚
-   `src/events.rs`: YM2151ãƒ¬ã‚¸ã‚¹ã‚¿ã¸ã®æ›¸ãè¾¼ã¿ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å®šç¾©ã—ã¾ã™ã€‚
-   `src/ipc/mod.rs`: ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ï¼ˆIPCï¼‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
-   `src/ipc/pipe_windows.rs`: Windowsã®åå‰ä»˜ããƒ‘ã‚¤ãƒ—ã‚’ä½¿ç”¨ã—ãŸIPCã®å®Ÿè£…ã§ã™ã€‚
-   `src/ipc/protocol.rs`: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼é–“ã§ã‚„ã‚Šå–ã‚Šã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚„ãƒ‡ãƒ¼ã‚¿ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å®šç¾©ã—ã¾ã™ã€‚
-   `src/ipc/windows/mod.rs`: Windowså›ºæœ‰ã®IPCãƒ‘ã‚¤ãƒ—å®Ÿè£…ã®è£œåŠ©ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã¾ã¨ã‚ã‚‹ãƒ«ãƒ¼ãƒˆã§ã™ã€‚
-   `src/ipc/windows/pipe_factory.rs`: Windowsåå‰ä»˜ããƒ‘ã‚¤ãƒ—ã®ç”Ÿæˆã‚’æ‹…å½“ã™ã‚‹ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
-   `src/ipc/windows/pipe_handle.rs`: Windowsãƒ‘ã‚¤ãƒ—ãƒãƒ³ãƒ‰ãƒ«ã‚’å®‰å…¨ã«ç®¡ç†ã™ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/ipc/windows/pipe_reader.rs`, `src/ipc/windows/pipe_writer.rs`: åå‰ä»˜ããƒ‘ã‚¤ãƒ—ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã€æ›¸ãè¾¼ã¿æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/ipc/windows/test_logging.rs`: ãƒ‘ã‚¤ãƒ—ãƒ†ã‚¹ãƒˆä¸­ã«ç™ºç”Ÿã™ã‚‹ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ‰±ã†ãŸã‚ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ã§ã™ã€‚
-   `src/logging.rs`: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®ãƒ­ã‚°å‡ºåŠ›è¨­å®šã¨æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/mmcss.rs`: Windowsã®Multimedia Class Scheduler Service (MMCSS) ã‚’åˆ©ç”¨ã—ã¦ã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå‡¦ç†ã®å„ªå…ˆåº¦ã‚’ä¸Šã’ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/opm.rs`: Cè¨€èªã§å®Ÿè£…ã•ã‚ŒãŸNuked-OPMãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®Rust FFIï¼ˆForeign Function Interfaceï¼‰ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/opm_ffi.rs`: OPM FFIã«é–¢ã™ã‚‹ç”Ÿã®å®šç¾©ã‚„å®šæ•°ã‚’å«ã¿ã¾ã™ã€‚
-   `src/player.rs`: ãƒ¡ã‚¤ãƒ³ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ã¨çŠ¶æ…‹ç®¡ç†ã‚’è¡Œã„ã¾ã™ã€‚
-   `src/resampler.rs`: ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆå¤‰æ›ï¼ˆãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼‰æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/scheduler.rs`: å†ç”Ÿã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç®¡ç†ã—ã¾ã™ã€‚
-   `src/server/command_handler.rs`: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰å—ä¿¡ã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’è§£é‡ˆã—ã€é©åˆ‡ãªã‚µãƒ¼ãƒãƒ¼å‡¦ç†ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚
-   `src/server/connection.rs`: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®æ¥ç¶šã‚’ç¢ºç«‹ã—ã€ç®¡ç†ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
-   `src/server/mod.rs`: `server`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ã‚µãƒ¼ãƒãƒ¼ã®ã‚³ã‚¢æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
-   `src/server/playback.rs`: ã‚µãƒ¼ãƒãƒ¼å´ã§ã®å®Ÿéš›ã®éŸ³æ¥½å†ç”Ÿã¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚
-   `src/server/state.rs`: ã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè¡ŒçŠ¶æ…‹ã‚„è¨­å®šã‚’ç®¡ç†ã™ã‚‹æ§‹é€ ä½“ã‚’å®šç¾©ã—ã¾ã™ã€‚
-   `src/tests/`: å†…éƒ¨ã®å˜ä½“ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’æ ¼ç´ã—ã¾ã™ã€‚
-   `src/wav_writer.rs`: ç”Ÿã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã‚’WAVãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§æ›¸ãå‡ºã™ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’æä¾›ã—ã¾ã™ã€‚
-   `tests/`: çµ±åˆãƒ†ã‚¹ãƒˆã‚„ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’æ ¼ç´ã—ã¾ã™ã€‚
-   `tests/fixtures/complex.json`, `tests/fixtures/simple.json`: ãƒ†ã‚¹ãƒˆã§ä½¿ç”¨ã•ã‚Œã‚‹YM2151ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã®JSONã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚

## é–¢æ•°è©³ç´°èª¬æ˜

-   `client::ensure_server_ready(app_name: &str) -> anyhow::Result<()>`
    -   **å½¹å‰²**: YM2151å†ç”Ÿã‚µãƒ¼ãƒãƒ¼ãŒåˆ©ç”¨å¯èƒ½ãªçŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
    -   **å¼•æ•°**: `app_name` - ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åå‰ï¼ˆã‚µãƒ¼ãƒãƒ¼è­˜åˆ¥ç”¨ï¼‰ã€‚
    -   **æˆ»ã‚Šå€¤**: æˆåŠŸã—ãŸå ´åˆã¯`Ok(())`ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯`cargo`çµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»èµ·å‹•ã—ã¾ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ãŒã‚³ãƒãƒ³ãƒ‰ã‚’å—ã‘ä»˜ã‘ã‚‰ã‚Œã‚‹ã¾ã§å¾…æ©Ÿã—ã€ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªé–‹ç™ºä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚

-   `client::send_json(json_data: &str) -> anyhow::Result<()>`
    -   **å½¹å‰²**: JSONå½¢å¼ã®YM2151ãƒ¬ã‚¸ã‚¹ã‚¿ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã—ã€éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§å†ç”Ÿã‚’é–‹å§‹ã—ã¾ã™ã€‚
    -   **å¼•æ•°**: `json_data` - YM2151ã‚¤ãƒ™ãƒ³ãƒˆã‚’å«ã‚€JSONæ–‡å­—åˆ—ã€‚
    -   **æˆ»ã‚Šå€¤**: æˆåŠŸã—ãŸå ´åˆã¯`Ok(())`ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: å„JSONãƒ‡ãƒ¼ã‚¿é€ä¿¡ã”ã¨ã«æ—¢å­˜ã®æ¼”å¥ã‚’åœæ­¢ã—ã€æ–°ã—ã„æ¼”å¥ã‚’é–‹å§‹ã—ã¾ã™ã€‚å˜ç™ºã®æ¥½æ›²å†ç”Ÿã‚„WAVå‡ºåŠ›ã«é©ã—ã¦ã„ã¾ã™ã€‚

-   `client::stop_playback() -> anyhow::Result<()>`
    -   **å½¹å‰²**: ç¾åœ¨ã‚µãƒ¼ãƒãƒ¼ã§å†ç”Ÿä¸­ã®YM2151éŸ³æ¥½ã‚’åœæ­¢ã—ã¾ã™ã€‚
    -   **å¼•æ•°**: ãªã—ã€‚
    -   **æˆ»ã‚Šå€¤**: æˆåŠŸã—ãŸå ´åˆã¯`Ok(())`ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: ã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦å†ç”Ÿåœæ­¢ã‚³ãƒãƒ³ãƒ‰ã‚’é€ä¿¡ã—ã€éŸ³æºãƒãƒƒãƒ—ã‚’ç„¡éŸ³çŠ¶æ…‹ã«ã—ã¾ã™ã€‚

-   `client::shutdown_server() -> anyhow::Result<()>`
    -   **å½¹å‰²**: YM2151å†ç”Ÿã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—ã¾ã™ã€‚
    -   **å¼•æ•°**: ãªã—ã€‚
    -   **æˆ»ã‚Šå€¤**: æˆåŠŸã—ãŸå ´åˆã¯`Ok(())`ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: ã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã‚³ãƒãƒ³ãƒ‰ã‚’é€ä¿¡ã—ã€ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†ã•ã›ã¾ã™ã€‚

-   `client::start_interactive() -> anyhow::Result<()>`
    -   **å½¹å‰²**: ã‚µãƒ¼ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™ã€‚
    -   **å¼•æ•°**: ãªã—ã€‚
    -   **æˆ»ã‚Šå€¤**: æˆåŠŸã—ãŸå ´åˆã¯`Ok(())`ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: é€£ç¶šã—ãŸã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’é–‹å§‹ã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

-   `client::play_json_interactive(json_data: &str) -> anyhow::Result<()>`
    -   **å½¹å‰²**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§JSONå½¢å¼ã®YM2151ãƒ¬ã‚¸ã‚¹ã‚¿ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã—ã€ç¾åœ¨ã®æ¼”å¥ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã—ã¾ã™ã€‚
    -   **å¼•æ•°**: `json_data` - YM2151ã‚¤ãƒ™ãƒ³ãƒˆã‚’å«ã‚€JSONæ–‡å­—åˆ—ã€‚
    -   **æˆ»ã‚Šå€¤**: æˆåŠŸã—ãŸå ´åˆã¯`Ok(())`ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: ç„¡éŸ³ã‚®ãƒ£ãƒƒãƒ—ãªã—ã§è¤‡æ•°ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’é€£ç¶šã—ã¦å†ç”Ÿã—ãŸã‚Šã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¼”å¥ã‚’åˆ‡ã‚Šæ›¿ãˆãŸã‚Šã™ã‚‹ã®ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚å†…éƒ¨ã§ã‚µãƒ³ãƒ—ãƒ«å˜ä½ã®æ™‚é–“ã‚’ç§’å˜ä½ã«å¤‰æ›ã—ã¾ã™ã€‚

-   `client::clear_schedule() -> anyhow::Result<()>`
    -   **å½¹å‰²**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§ã€ã¾ã ã‚µãƒ¼ãƒãƒ¼ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã¦ã„ãªã„æœªæ¥ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚
    -   **å¼•æ•°**: ãªã—ã€‚
    -   **æˆ»ã‚Šå€¤**: æˆåŠŸã—ãŸå ´åˆã¯`Ok(())`ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: ç¾åœ¨ã®æ¼”å¥ã‚’ä¸­æ–­ã—ã€æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆã§å³åº§ã«ä¸Šæ›¸ãã—ãŸã„å ´åˆã«åˆ©ç”¨ã—ã¾ã™ã€‚

-   `client::get_server_time() -> anyhow::Result<f64>`
    -   **å½¹å‰²**: ã‚µãƒ¼ãƒãƒ¼ã®ç¾åœ¨ã®å†ç”Ÿæ™‚åˆ»ï¼ˆç§’å˜ä½ï¼‰ã‚’å–å¾—ã—ã¾ã™ã€‚
    -   **å¼•æ•°**: ãªã—ã€‚
    -   **æˆ»ã‚Šå€¤**: ã‚µãƒ¼ãƒãƒ¼æ™‚åˆ»ã‚’è¡¨ã™`f64`å€¤ã€ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚µãƒ¼ãƒãƒ¼ã¨æ­£ç¢ºãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§åŒæœŸã™ã‚‹ãŸã‚ã®æƒ…å ±ã‚’æä¾›ã—ã€Web Audioã®`currentTime`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ç›¸å½“ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚

-   `client::stop_interactive() -> anyhow::Result<()>`
    -   **å½¹å‰²**: ã‚µãƒ¼ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã‚’çµ‚äº†ã—ã¾ã™ã€‚
    -   **å¼•æ•°**: ãªã—ã€‚
    -   **æˆ»ã‚Šå€¤**: æˆåŠŸã—ãŸå ´åˆã¯`Ok(())`ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯`anyhow::Result`ã€‚
    -   **æ©Ÿèƒ½**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§ç¢ºç«‹ã•ã‚ŒãŸé€£ç¶šã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’åœæ­¢ã—ã¾ã™ã€‚

## é–¢æ•°å‘¼ã³å‡ºã—éšå±¤ãƒ„ãƒªãƒ¼
```
main.rs (ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ)
â””â”€â”€ server::run() (ã‚µãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰èµ·å‹•æ™‚)
    â”œâ”€â”€ server::connection::accept_connections()
    â”‚   â””â”€â”€ server::connection::handle_client_connection()
    â”‚       â””â”€â”€ server::command_handler::handle_command()
    â”‚           â”œâ”€â”€ server::playback::start_playback() (éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å†ç”Ÿ)
    â”‚           â”‚   â””â”€â”€ audio::player::Player::start()
    â”‚           â”‚       â””â”€â”€ audio::stream::start_audio_stream()
    â”‚           â””â”€â”€ server::playback::schedule_interactive_events() (ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å†ç”Ÿ)
    â”‚               â””â”€â”€ audio::scheduler::Scheduler::schedule_event()
    â””â”€â”€ audio::player::Player::new()
        â””â”€â”€ audio::stream::create_output_stream()
            â””â”€â”€ mmcss::promote_thread_priority()

main.rs (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰èµ·å‹•æ™‚)
â””â”€â”€ client::cli::run_client_command() (ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«å¿œã˜ã¦)
    â”œâ”€â”€ client::ensure_server_ready()
    â”‚   â”œâ”€â”€ client::server::is_server_running()
    â”‚   â”œâ”€â”€ client::server::install_server() (å¿…è¦ã«å¿œã˜ã¦)
    â”‚   â””â”€â”€ client::server::start_server_in_background()
    â”œâ”€â”€ client::send_json() (éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–)
    â”‚   â””â”€â”€ ipc::pipe_windows::send_command()
    â”‚       â””â”€â”€ ipc::protocol::serialize_command()
    â”œâ”€â”€ client::stop_playback()
    â”‚   â””â”€â”€ ipc::pipe_windows::send_command()
    â”œâ”€â”€ client::shutdown_server()
    â”‚   â””â”€â”€ ipc::pipe_windows::send_command()
    â”œâ”€â”€ client::start_interactive()
    â”‚   â””â”€â”€ ipc::pipe_windows::send_command()
    â”œâ”€â”€ client::play_json_interactive()
    â”‚   â””â”€â”€ ipc::pipe_windows::send_command()
    â”œâ”€â”€ client::clear_schedule()
    â”‚   â””â”€â”€ ipc::pipe_windows::send_command()
    â”œâ”€â”€ client::get_server_time()
    â”‚   â””â”€â”€ ipc::pipe_windows::send_command()
    â””â”€â”€ client::stop_interactive()
        â””â”€â”€ ipc::pipe_windows::send_command()

build.rs
â””â”€â”€ cc::Build::new()
    â””â”€â”€ compile opm.c (Nuked-OPM)

---
Generated at: 2025-11-24 07:02:27 JST
